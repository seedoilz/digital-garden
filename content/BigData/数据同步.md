---
aliases: 
title: 数据同步
date created: 2024-04-25 20:04:00
date modified: 2024-04-25 20:04:85
tags: [code/big-data]
---
## 优缺点

| **同步策略** | **优点**          | **缺点**                                                            |
| -------- | --------------- | ----------------------------------------------------------------- |
| **全量同步** | 逻辑简单            | 在某些情况下效率较低。例如某张表数据量较大，但是每天数据的变化比例很低，若对其采用每日全量同步，则会重复同步和存储大量相同的数据。 |
| **增量同步** | 效率高，无需同步和存储重复数据 | 逻辑复杂，需要将每日的新增及变化数据同原来的数据进行整合，才能使用                                 |
### 如何选择？
通常情况，业务表数据量比较大，优先考虑增量，数据量比较小，优先考虑全量；
具体选择由数仓模型决定，此处暂不详解。

### 技术栈选择
| **增量同步方案**  | **[[DataX]]/Sqoop**                                                                | **[[Maxwell]]/Canal**               |
| ----------- | ---------------------------------------------------------------------------------- | ----------------------------------- |
| **对数据库的要求** | 原理是基于查询，故若想通过select查询获取新增及变化数据，就要求数据表中存在create_time、update_time等字段，然后根据这些字段获取变更数据。 | 要求数据库记录变更操作，例如MySQL需开启binlog。       |
| **数据的中间状态** | 由于是离线批量同步，故若一条数据在一天中变化多次，该方案只能获取最后一个状态，中间状态无法获取。                                   | 由于是实时获取所有的数据变更操作，所以可以获取变更数据的所有中间状态。 |
